(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{67788:function(i,d,a){"use strict";a.r(d),a.d(d,{default:function(){return ad}});var j=a(72640),k=a(67294),e=a(9008),l=a.n(e),m=a(37690),n=a(71927),f=a(26295),o=(0,f.Z)({palette:{mode:"dark"},components:{MUIDataTableBodyCell:{styleOverrides:{root:{padding:"3px 10px",wordBreak:"break-all"}}},MUIDataTableToolbar:{styleOverrides:{filterPaper:{"@media (max-width: 450px)":{width:"100vw !important",left:"0 !important",top:"0 !important",maxWidth:"100vw !important"},"@media (min-width: 451px)":{minWidth:"450px !important"}}}}}}),p={body:{noMatch:"Nenhum log",toolTip:"Ordenar",columnHeaderTooltip:function(a){return"Ordenar por ".concat(a.label)}},pagination:{next:"Pr\xf3xima p\xe1gina",previous:"P\xe1gina anterior",rowsPerPage:"Logs por p\xe1gina:",displayRows:"de"},toolbar:{search:"Pesquisar",downloadCsv:"Baixar CSV",print:"Imprimir",viewColumns:"Colunas vis\xedveis",filterTable:"Filtrar tabela",adjustColumnWidth:"Ajustar largura das colunas",refresh:"Atualizar logs",downloadJson:"Baixar JSON",uploadJson:"Importar logs de JSON",dbFilter:"Filtros em JSON do banco de dados"},filter:{all:"Todos",title:"FILTROS",reset:"REDEFINIR",apply:"Filtrar",dateTime:"Data/hora",before:"Antes de",after:"Depois de"},viewColumns:{title:"Colunas vis\xedveis",titleAria:"Exibir/Ocultar colunas da tabela"},selectedRows:{text:"linha(s) selecionadas",delete:"Excluir",deleteAria:"Excluir linhas selecionadas"},dbFilter:{dialogTitle:"Filtros JSON do banco de dados",dialogTextFieldLabel:"JSON",dialogButtonCancel:"Cancelar",dialogButtonOK:"OK",dialogReset:"Redefinir para o padr\xe3o",dialogSave:"Salvar como padr\xe3o",dialogClear:"Limpar filtros"}},q=a(50029),g=a(87794),r=a.n(g),h=a(9669),s=a.n(h),c=a(81458),b=a(85893),t={date:(0,b.jsx)(c.Z,{}),level:(0,b.jsx)(c.Z,{}),info:(0,b.jsx)(c.Z,{}),title:(0,b.jsx)(c.Z,{}),contents:(0,b.jsx)(c.Z,{}),details:(0,b.jsx)(c.Z,{})},u={date:(0,b.jsx)("span",{children:"-"}),level:"ERROR",title:(0,b.jsx)("span",{children:"Erro"}),contents:(0,b.jsx)("span",{children:"Ocorreu um erro ao baixar os logs"}),details:(0,b.jsx)("span",{children:"Atualize para tentar novamente"})};function v(a,b){return w.apply(this,arguments)}function w(){return(w=(0,q.Z)(r().mark(function a(b,c){var d,e;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b([t]),a.next=3,s().get("./data",{params:{q:c||localStorage.getItem("logs.dbFilter")||"{}"}}).catch(function(a){return console.error(a),{data:[u]}});case 3:b(e=(d=a.sent).data);case 6:case"end":return a.stop()}},a)}))).apply(this,arguments)}var x=a(59499),y=a(32286),z=a(97717),A=a(41208),B=a(79332),C=a(53640),D=a(70785),E=a(40476),F=a(60076),G={customFilterListOptions:{render:function(a){return a[0]&&a[1]?["".concat(p.filter.after,": ").concat(new Date(a[0]).toLocaleString()),"".concat(p.filter.before,": ").concat(new Date(a[1]).toLocaleString())]:a[0]?"".concat(p.filter.after,": ").concat(new Date(a[0]).toLocaleString()):a[1]?"".concat(p.filter.before,": ").concat(new Date(a[1]).toLocaleString()):[]},update:function(b,a,c){return 0===a?b[c].splice(a,1,""):1===a?b[c].splice(a,1):-1===a&&(b[c]=[]),b}},filterOptions:{names:[],logic:function(g,e,f){var d=(0,j.Z)(e,2),a=d[0],b=d[1],c=new Date(f[0]);return a&&b?!(c>new Date(a)&&c<new Date(b)):a?!(c>new Date(a)):!!b&&!(c<new Date(b))},display:function(a,d,c,e){return(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Z,{children:p.filter.dateTime}),(0,b.jsxs)(D.Z,{row:!0,children:[(0,b.jsxs)(C.Z,{sx:{m:1,width:"25ch"},variant:"standard",children:[(0,b.jsx)(F.Z,{shrink:!0,htmlFor:"filter-date-after",children:p.filter.after}),(0,b.jsx)(B.Z,{id:"filter-date-after",type:"datetime-local",value:a[c][0]||"",onChange:function(b){a[c][0]=b.target.value,d(a[c],c,e)}})]}),(0,b.jsxs)(C.Z,{sx:{m:1,width:"25ch"},variant:"standard",children:[(0,b.jsx)(F.Z,{shrink:!0,htmlFor:"filter-date-before",children:p.filter.before}),(0,b.jsx)(B.Z,{id:"filter-date-before",type:"datetime-local",value:a[c][1]||"",onChange:function(b){a[c][1]=b.target.value,d(a[c],c,e)}})]})]})]})}}};function H(a){var c=a.level,d=a.children;return(0,b.jsx)("div",{style:{backgroundColor:{SUCCESS:"#198754",WARNING:"#ffc107",ERROR:"#dc3545",INFO:"#0d6efd",DEBUG:"#111111"}[c],color:"white",borderRadius:"1000px",padding:"5px 10px",textAlign:"center",fontWeight:"bold",fontSize:"10px"},children:d})}function I(c){var a=c.color;return(0,b.jsx)("div",{title:a,style:{backgroundColor:{black:"#000000",red:"#842029",green:"#0f5132",yellow:"#997404",blue:"#084298",magenta:"#432874",cyan:"#087990",white:"#dddddd",blackBright:"#6c757d",gray:"#6c757d",grey:"#6c757d",redBright:"#dc3545",greenBright:"#198754",yellowBright:"#ffc107",blueBright:"#0d6efd",magentaBright:"#6f42c1",cyanBright:"#0dcaf0",whiteBright:"#ffffff"}[a],borderRadius:"50%",width:"24px",height:"24px",border:"white 2px solid",display:"inline-block",marginLeft:"4px"}})}function J(c,d){var a=Object.keys(c);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(c);d&&(b=b.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})),a.push.apply(a,b)}return a}function K(c){for(var a=1;a<arguments.length;a++){var b=null!=arguments[a]?arguments[a]:{};a%2?J(Object(b),!0).forEach(function(a){(0,x.Z)(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):J(Object(b)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}var L=a(42992),M=a(54799),N=a(52789),O=a(54970),P=a(13505),Q=a(23365),R=a(1849),S=a(50657),T=a(31425),U=a(6514),V=a(37645),W=a(76798),X=a(18571),Y=a(68162),Z=a(74663),$=a(34282),_=a(27971);function aa(f){var o=f.fetchData,g=k.useState(!1),a=(0,j.Z)(g,2),h=a[0],q=a[1],i=k.useState(),c=(0,j.Z)(i,2),l=c[0],r=c[1],m=k.useState(!1),d=(0,j.Z)(m,2),n=d[0],s=d[1];k.useEffect(function(){r(localStorage.getItem("logs.dbFilter")||"{}")},[]);var e=function(){try{var a=JSON.parse(l);return"object"==typeof a}catch(b){return!1}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(N.Z,{title:p.toolbar.dbFilter,disableFocusListener:!0,children:(0,b.jsx)(M.Z,{"aria-label":p.toolbar.dbFilter,onClick:function(){return q(!0)},children:(0,b.jsx)(Y.Z,{})})}),(0,b.jsxs)(S.Z,{open:h,onClose:function(){return q(!1)},children:[(0,b.jsx)(V.Z,{children:p.dbFilter.dialogTitle}),(0,b.jsxs)(U.Z,{children:[(0,b.jsx)(X.Z,{autoFocus:!0,error:!e(),fullWidth:!0,helperText:!e()&&"JSON inv\xe1lido",InputProps:{style:{fontFamily:"monospace"}},label:p.dbFilter.dialogTextFieldLabel,margin:"dense",multiline:!0,onChange:function(a){return r(a.target.value)},rows:4,sx:{mb:2},value:l,variant:"filled"}),(0,b.jsx)(L.Z,{fullWidth:!0,onClick:function(){r(localStorage.getItem("logs.dbFilter")||"{}")},startIcon:(0,b.jsx)(Z.Z,{}),children:p.dbFilter.dialogReset}),(0,b.jsx)(L.Z,{fullWidth:!0,onClick:function(){e&&(localStorage.setItem("logs.dbFilter",l),s(!0))},startIcon:(0,b.jsx)(_.Z,{}),children:p.dbFilter.dialogSave}),(0,b.jsx)(L.Z,{fullWidth:!0,onClick:function(){r("{}")},startIcon:(0,b.jsx)($.Z,{}),children:p.dbFilter.dialogClear})]}),(0,b.jsxs)(T.Z,{children:[(0,b.jsx)(L.Z,{onClick:function(){q(!1)},children:p.dbFilter.dialogButtonCancel}),(0,b.jsx)(L.Z,{onClick:function(){q(!1),o(l)},children:p.dbFilter.dialogButtonOK})]})]}),(0,b.jsx)(W.Z,{open:n,autoHideDuration:6e3,onClose:function(){return s(!1)},message:"Filtro padr\xe3o atualizado"})]})}function ab(){return(ab=(0,q.Z)(r().mark(function a(b){var c,d,e,f,g,h,i;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c={types:[{description:"JSON",accept:{"application/json":[".json"]}}],multiple:!1},a.prev=1,a.next=4,window.showOpenFilePicker(c);case 4:return d=a.sent,f=(e=(0,j.Z)(d,1))[0],a.next=9,f.getFile();case 9:return g=a.sent,a.next=12,g.text();case 12:if(h=a.sent,a.prev=13,i=JSON.parse(h),Array.isArray(i)){a.next=17;break}throw Error("JSON content is not an Array");case 17:b(i),a.next=23;break;case 20:a.prev=20,a.t0=a.catch(13),alert("O conte\xfado do arquivo \xe9 inv\xe1lido");case 23:a.next=27;break;case 25:a.prev=25,a.t1=a.catch(1);case 27:case"end":return a.stop()}},a,null,[[1,25],[13,20]])}))).apply(this,arguments)}var ac=function(a){var c=a.setResizableColumns,d=a.resizableColumns,e=a.data,f=a.setData,g=a.dbFilterDialogOpen,h=a.setDbFilterDialogOpen,i=a.fetchData;return function(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(N.Z,{title:p.toolbar.adjustColumnWidth,disableFocusListener:!0,children:(0,b.jsx)(M.Z,{"aria-label":p.toolbar.adjustColumnWidth,onClick:function(){return c(!d)},children:(0,b.jsx)(Q.Z,{style:{transform:"rotate(90deg)"}})})}),(0,b.jsx)(N.Z,{title:p.toolbar.downloadJson,disableFocusListener:!0,children:(0,b.jsx)(M.Z,{"aria-label":p.toolbar.downloadJson,onClick:function(){var f,c,d,b,a;return c=JSON.stringify(f=e),d=new Blob([c],{type:"octet/stream"}),b=URL.createObjectURL(d),a=document.createElement("a"),void(document.body.appendChild(a),a.style.display="none",a.href=b,a.download="logs-".concat(new Date().toISOString(),".json"),a.click(),URL.revokeObjectURL(b))},children:(0,b.jsx)(P.Z,{})})}),(0,b.jsx)(N.Z,{title:p.toolbar.uploadJson,disableFocusListener:!0,children:(0,b.jsx)(M.Z,{"aria-label":p.toolbar.uploadJson,onClick:function(){return function(a){return ab.apply(this,arguments)}(f)},children:(0,b.jsx)(O.Z,{})})}),(0,b.jsx)(aa,{open:g,setOpen:h,fetchData:function(a){return i(f,a)}}),(0,b.jsx)(N.Z,{title:p.toolbar.refresh,disableFocusListener:!0,children:(0,b.jsx)(M.Z,{"aria-label":p.toolbar.refresh,onClick:function(){return i(f)},children:(0,b.jsx)(R.Z,{})})})]})}},ad=function(){var h=k.useState([t]),c=(0,j.Z)(h,2),a=c[0],i=c[1],q=k.useState(!1),d=(0,j.Z)(q,2),r=d[0],s=d[1],u=k.useState(!1),e=(0,j.Z)(u,2),f=e[0],w=e[1],x=k.useState(50),g=(0,j.Z)(x,2),B=g[0],E=g[1];k.useEffect(function(){v(i)},[]);var C,D=ac({setResizableColumns:w,resizableColumns:f,data:a,setData:i,dbFilterDialogOpen:r,setDbFilterDialogOpen:s,fetchData:v});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l(),{children:(0,b.jsx)("title",{children:"Logs"})}),(0,b.jsx)(n.Z,{theme:o,children:(0,b.jsx)(m.ZP,{title:"Logs",className:"no-border-radius",data:a,columns:(C=a,[{label:"Tempo",name:"date",options:{filterType:"custom",setCellProps:function(){return{style:{whiteSpace:"nowrap"}}},customBodyRender:function(a){return isNaN(Number(new Date(a)))?a:new Date(a).toLocaleString()},customFilterListOptions:G.customFilterListOptions,filterOptions:G.filterOptions}},{label:"N\xedvel",name:"level",filterList:["SUCCESS","ERROR","DEBUG","INFO","WARNING"],options:{setCellProps:function(){return{style:{whiteSpace:"nowrap"}}},customBodyRender:function(a){return void 0===a?(0,b.jsx)(b.Fragment,{}):(0,b.jsx)(H,{level:a,children:a})}}},{label:"T\xedtulo",name:"title",options:{setCellProps:function(){return{style:{whiteSpace:"nowrap"}}},customHeadLabelRender:function(a){return(0,b.jsx)("div",{style:{whiteSpace:"nowrap"},children:a.label})}}},{label:"Info",name:"info",options:{setCellProps:function(){return{style:{whiteSpace:"nowrap"}}},customHeadLabelRender:function(a){return(0,b.jsx)("div",{style:{whiteSpace:"nowrap"},children:a.label})},customBodyRenderLite:function(a,i){if(k.isValidElement(null===(j=C[a])|| void 0===j?void 0:j.info))return C[a].info;var j,c,d,e,f=null===(c=C[a])|| void 0===c?void 0:c.hideProduction,g=null===(d=C[a])|| void 0===d?void 0:d.hideConsole,h=null===(e=C[a])|| void 0===e?void 0:e.color;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{title:"Mostrado no modo de produ\xe7\xe3o",hidden:f,children:(0,b.jsx)(A.Z,{})}),(0,b.jsx)("span",{title:"Oculto do console",hidden:!g,children:(0,b.jsx)(z.Z,{style:{marginLeft:"4px"}})}),(0,b.jsx)(I,{color:h})]})}}},{label:"Conte\xfado",name:"contents",options:{filterType:"textField",customBodyRender:function(a){return void 0===a?(0,b.jsx)(b.Fragment,{}):Array.isArray(a)?a.map(function(c,d){return"object"==typeof c?(0,b.jsx)(y.vu,{data:a,theme:K(K({},y.i6),{BASE_BACKGROUND_COLOR:"transparent"})},d):(0,b.jsx)("span",{style:{marginRight:"10px"},children:c},d)}):a}}},{label:"Detalhes",name:"details",sort:!1,options:{filterOptions:{names:[],logic:function(a,c,d){var b;try{a=JSON.stringify(a)}catch(e){}return!(null!==(b=a)&& void 0!==b?b:"").toString().includes(c[0])}},filterType:"textField",customBodyRenderLite:function(d,e){var c,a=null===(c=C[d])|| void 0===c?void 0:c.details;return void 0===a?(0,b.jsx)(b.Fragment,{}):k.isValidElement(a)?a:(0,b.jsx)(y.vu,{data:a,theme:K(K({},y.i6),{BASE_BACKGROUND_COLOR:"transparent"})})}}}]),options:{confirmFilters:!0,customFilterDialogFooter:function(c,a){return(0,b.jsx)("div",{style:{marginTop:"40px"},children:(0,b.jsx)(L.Z,{variant:"contained",onClick:a,children:p.filter.apply})})},customToolbar:D,download:!1,filterType:"multiselect",fixedHeader:!0,print:!1,resizableColumns:f,onChangeRowsPerPage:function(a){return E(a)},rowsPerPage:B,rowsPerPageOptions:[10,50,100,200,500,1e3],selectableRows:"none",sortOrder:{name:"date",direction:"desc"},tableBodyHeight:"calc(100vh - 64px - 53px)",textLabels:p}})})]})}},45728:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(67788)}])}},function(a){a.O(0,[505,774,888,179],function(){var b;return a(a.s=45728)}),_N_E=a.O()}])