(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{67788:function(k,d,a){"use strict";a.r(d),a.d(d,{default:function(){return ag}});var l=a(72640),m=a(67294),e=a(9008),n=a.n(e),o=a(37690),p=a(71927),f=a(26295),q=(0,f.Z)({palette:{mode:"dark"},components:{MUIDataTableBodyCell:{styleOverrides:{root:{padding:"3px 10px",wordBreak:"break-all"}}},MUIDataTableToolbar:{styleOverrides:{filterPaper:{"@media (max-width: 450px)":{width:"100vw !important",left:"0 !important",top:"0 !important",maxWidth:"100vw !important"},"@media (min-width: 451px)":{minWidth:"450px !important"}}}}}}),r={body:{noMatch:"Nenhum log",toolTip:"Ordenar",columnHeaderTooltip:function(a){return"Ordenar por ".concat(a.label)}},pagination:{next:"Pr\xf3xima p\xe1gina",previous:"P\xe1gina anterior",rowsPerPage:"Logs por p\xe1gina:",displayRows:"de"},toolbar:{search:"Pesquisar",downloadCsv:"Baixar CSV",print:"Imprimir",viewColumns:"Colunas vis\xedveis",filterTable:"Filtrar tabela",adjustColumnWidth:"Ajustar largura das colunas",refresh:"Atualizar logs",downloadJson:"Baixar JSON",uploadJson:"Importar logs de JSON",dbFilter:"Filtros em JSON do banco de dados"},filter:{all:"Todos",title:"FILTROS",reset:"REDEFINIR",apply:"Filtrar",dateTime:"Data/hora",before:"Antes de",after:"Depois de"},viewColumns:{title:"Colunas vis\xedveis",titleAria:"Exibir/Ocultar colunas da tabela"},selectedRows:{text:"linha(s) selecionadas",delete:"Excluir",deleteAria:"Excluir linhas selecionadas"},dbFilter:{dialogTitle:"Filtros JSON do banco de dados",dialogTextFieldLabel:"JSON",dialogButtonCancel:"Cancelar",dialogButtonOK:"OK",dialogReset:"Redefinir para o padr\xe3o",dialogSave:"Salvar como padr\xe3o",dialogClear:"Limpar filtros"}},s=a(50029),g=a(87794),t=a.n(g),h=a(9669),u=a.n(h),c=a(81458),b=a(85893),v={date:(0,b.jsx)(c.Z,{}),level:(0,b.jsx)(c.Z,{}),info:(0,b.jsx)(c.Z,{}),title:(0,b.jsx)(c.Z,{}),code:(0,b.jsx)(c.Z,{}),contents:(0,b.jsx)(c.Z,{}),details:(0,b.jsx)(c.Z,{})},w={date:(0,b.jsx)("span",{children:"-"}),level:"ERROR",title:(0,b.jsx)("span",{children:"Erro"}),contents:(0,b.jsx)("span",{children:"Ocorreu um erro ao baixar os logs"}),details:(0,b.jsx)("span",{children:"Atualize para tentar novamente"})},i=a(11752),j=(0,i.default)(),x=j.publicRuntimeConfig;function y(a,b){return z.apply(this,arguments)}function z(){return(z=(0,s.Z)(t().mark(function a(b,c){var d,e;return t().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b([v]),a.next=3,u().get(x.LOGS_DATA_URL||"./data",{auth:x.LOGS_DATA_USERNAME&&x.LOGS_DATA_PASSWORD?{username:x.LOGS_DATA_USERNAME,password:x.LOGS_DATA_PASSWORD}:void 0,params:{q:c||localStorage.getItem("logs.dbFilter")||"{}"}}).catch(function(a){return console.error(a),{data:[w]}});case 3:b(e=(d=a.sent).data);case 6:case"end":return a.stop()}},a)}))).apply(this,arguments)}var A=a(59499),B=a(32286),C=a(97717),D=a(41208),E=a(79332),F=a(53640),G=a(70785),H=a(40476),I=a(60076),J={customFilterListOptions:{render:function(a){return a[0]&&a[1]?["".concat(r.filter.after,": ").concat(new Date(a[0]).toLocaleString()),"".concat(r.filter.before,": ").concat(new Date(a[1]).toLocaleString())]:a[0]?"".concat(r.filter.after,": ").concat(new Date(a[0]).toLocaleString()):a[1]?"".concat(r.filter.before,": ").concat(new Date(a[1]).toLocaleString()):[]},update:function(b,a,c){return 0===a?b[c].splice(a,1,""):1===a?b[c].splice(a,1):-1===a&&(b[c]=[]),b}},filterOptions:{names:[],logic:function(g,e,f){var d=(0,l.Z)(e,2),a=d[0],b=d[1],c=new Date(f[0]);return a&&b?!(c>new Date(a)&&c<new Date(b)):a?!(c>new Date(a)):!!b&&!(c<new Date(b))},display:function(a,d,c,e){return(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Z,{children:r.filter.dateTime}),(0,b.jsxs)(G.Z,{row:!0,children:[(0,b.jsxs)(F.Z,{sx:{m:1,width:"25ch"},variant:"standard",children:[(0,b.jsx)(I.Z,{shrink:!0,htmlFor:"filter-date-after",children:r.filter.after}),(0,b.jsx)(E.Z,{id:"filter-date-after",type:"datetime-local",value:a[c][0]||"",onChange:function(b){a[c][0]=b.target.value,d(a[c],c,e)}})]}),(0,b.jsxs)(F.Z,{sx:{m:1,width:"25ch"},variant:"standard",children:[(0,b.jsx)(I.Z,{shrink:!0,htmlFor:"filter-date-before",children:r.filter.before}),(0,b.jsx)(E.Z,{id:"filter-date-before",type:"datetime-local",value:a[c][1]||"",onChange:function(b){a[c][1]=b.target.value,d(a[c],c,e)}})]})]})]})}}};function K(a){var c=a.level,d=a.children;return(0,b.jsx)("div",{style:{backgroundColor:{SUCCESS:"#198754",WARNING:"#ffc107",ERROR:"#dc3545",INFO:"#0d6efd",DEBUG:"#111111"}[c],color:"white",borderRadius:"1000px",padding:"5px 10px",textAlign:"center",fontWeight:"bold",fontSize:"10px"},children:d})}function L(c){var a=c.color;return(0,b.jsx)("div",{title:a,style:{backgroundColor:{black:"#000000",red:"#842029",green:"#0f5132",yellow:"#997404",blue:"#084298",magenta:"#432874",cyan:"#087990",white:"#dddddd",blackBright:"#6c757d",gray:"#6c757d",grey:"#6c757d",redBright:"#dc3545",greenBright:"#198754",yellowBright:"#ffc107",blueBright:"#0d6efd",magentaBright:"#6f42c1",cyanBright:"#0dcaf0",whiteBright:"#ffffff"}[a],borderRadius:"50%",width:"24px",height:"24px",border:"white 2px solid",display:"inline-block",marginLeft:"4px"}})}function M(c,d){var a=Object.keys(c);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(c);d&&(b=b.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})),a.push.apply(a,b)}return a}function N(c){for(var a=1;a<arguments.length;a++){var b=null!=arguments[a]?arguments[a]:{};a%2?M(Object(b),!0).forEach(function(a){(0,A.Z)(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):M(Object(b)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}var O=a(42992),P=a(54799),Q=a(52789),R=a(54970),S=a(13505),T=a(23365),U=a(1849),V=a(50657),W=a(31425),X=a(6514),Y=a(37645),Z=a(76798),$=a(18571),_=a(68162),aa=a(74663),ab=a(34282),ac=a(27971);function ad(f){var o=f.fetchData,g=m.useState(!1),c=(0,l.Z)(g,2),h=c[0],p=c[1],i=m.useState(),d=(0,l.Z)(i,2),j=d[0],q=d[1],k=m.useState(!1),e=(0,l.Z)(k,2),n=e[0],s=e[1];m.useEffect(function(){q(localStorage.getItem("logs.dbFilter")||"{}")},[]);var a=function(){try{var a=JSON.parse(j);return"object"==typeof a}catch(b){return!1}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Q.Z,{title:r.toolbar.dbFilter,disableFocusListener:!0,children:(0,b.jsx)(P.Z,{"aria-label":r.toolbar.dbFilter,onClick:function(){return p(!0)},children:(0,b.jsx)(_.Z,{})})}),(0,b.jsxs)(V.Z,{open:h,onClose:function(){return p(!1)},children:[(0,b.jsx)(Y.Z,{children:r.dbFilter.dialogTitle}),(0,b.jsxs)(X.Z,{children:[(0,b.jsx)($.Z,{autoFocus:!0,error:!a(),fullWidth:!0,helperText:!a()&&"JSON inv\xe1lido",InputProps:{style:{fontFamily:"monospace"}},label:r.dbFilter.dialogTextFieldLabel,margin:"dense",multiline:!0,onChange:function(a){return q(a.target.value)},rows:4,sx:{mb:2},value:j,variant:"filled"}),(0,b.jsx)(O.Z,{fullWidth:!0,onClick:function(){q(localStorage.getItem("logs.dbFilter")||"{}")},startIcon:(0,b.jsx)(aa.Z,{}),children:r.dbFilter.dialogReset}),(0,b.jsx)(O.Z,{fullWidth:!0,onClick:function(){a()&&(localStorage.setItem("logs.dbFilter",j),s(!0))},startIcon:(0,b.jsx)(ac.Z,{}),disabled:!a(),children:r.dbFilter.dialogSave}),(0,b.jsx)(O.Z,{fullWidth:!0,onClick:function(){q("{}")},startIcon:(0,b.jsx)(ab.Z,{}),children:r.dbFilter.dialogClear})]}),(0,b.jsxs)(W.Z,{children:[(0,b.jsx)(O.Z,{onClick:function(){p(!1)},children:r.dbFilter.dialogButtonCancel}),(0,b.jsx)(O.Z,{onClick:function(){p(!1),o(j)},disabled:!a(),children:r.dbFilter.dialogButtonOK})]})]}),(0,b.jsx)(Z.Z,{open:n,autoHideDuration:6e3,onClose:function(){return s(!1)},message:"Filtro padr\xe3o atualizado"})]})}function ae(){return(ae=(0,s.Z)(t().mark(function a(b){var c,d,e,f,g,h,i;return t().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c={types:[{description:"JSON",accept:{"application/json":[".json"]}}],multiple:!1},a.prev=1,a.next=4,window.showOpenFilePicker(c);case 4:return d=a.sent,f=(e=(0,l.Z)(d,1))[0],a.next=9,f.getFile();case 9:return g=a.sent,a.next=12,g.text();case 12:if(h=a.sent,a.prev=13,i=JSON.parse(h),Array.isArray(i)){a.next=17;break}throw Error("JSON content is not an Array");case 17:b(i),a.next=23;break;case 20:a.prev=20,a.t0=a.catch(13),alert("O conte\xfado do arquivo \xe9 inv\xe1lido");case 23:a.next=27;break;case 25:a.prev=25,a.t1=a.catch(1);case 27:case"end":return a.stop()}},a,null,[[1,25],[13,20]])}))).apply(this,arguments)}var af=function(a){var c=a.setResizableColumns,d=a.resizableColumns,e=a.data,f=a.setData,g=a.dbFilterDialogOpen,h=a.setDbFilterDialogOpen,i=a.fetchData;return function(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Q.Z,{title:r.toolbar.adjustColumnWidth,disableFocusListener:!0,children:(0,b.jsx)(P.Z,{"aria-label":r.toolbar.adjustColumnWidth,onClick:function(){return c(!d)},children:(0,b.jsx)(T.Z,{style:{transform:"rotate(90deg)"}})})}),(0,b.jsx)(Q.Z,{title:r.toolbar.downloadJson,disableFocusListener:!0,children:(0,b.jsx)(P.Z,{"aria-label":r.toolbar.downloadJson,onClick:function(){var f,c,d,b,a;return c=JSON.stringify(f=e),d=new Blob([c],{type:"octet/stream"}),b=URL.createObjectURL(d),a=document.createElement("a"),void(document.body.appendChild(a),a.style.display="none",a.href=b,a.download="logs-".concat(new Date().toISOString(),".json"),a.click(),URL.revokeObjectURL(b))},children:(0,b.jsx)(S.Z,{})})}),(0,b.jsx)(Q.Z,{title:r.toolbar.uploadJson,disableFocusListener:!0,children:(0,b.jsx)(P.Z,{"aria-label":r.toolbar.uploadJson,onClick:function(){return function(a){return ae.apply(this,arguments)}(f)},children:(0,b.jsx)(R.Z,{})})}),(0,b.jsx)(ad,{open:g,setOpen:h,fetchData:function(a){return i(f,a)}}),(0,b.jsx)(Q.Z,{title:r.toolbar.refresh,disableFocusListener:!0,children:(0,b.jsx)(P.Z,{"aria-label":r.toolbar.refresh,onClick:function(){return i(f)},children:(0,b.jsx)(U.Z,{})})})]})}},ag=function(){var h=m.useState([v]),c=(0,l.Z)(h,2),a=c[0],i=c[1],j=m.useState(!1),d=(0,l.Z)(j,2),k=d[0],s=d[1],t=m.useState(!1),e=(0,l.Z)(t,2),f=e[0],u=e[1],w=m.useState(50),g=(0,l.Z)(w,2),x=g[0],E=g[1];m.useEffect(function(){y(i)},[]);var z,A=af({setResizableColumns:u,resizableColumns:f,data:a,setData:i,dbFilterDialogOpen:k,setDbFilterDialogOpen:s,fetchData:y});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n(),{children:(0,b.jsx)("title",{children:"Logs"})}),(0,b.jsx)(p.Z,{theme:q,children:(0,b.jsx)(o.ZP,{title:"Logs",className:"no-border-radius",data:a,columns:(z=a,[{label:"Tempo",name:"date",options:{filterType:"custom",setCellProps:function(){return{style:{whiteSpace:"nowrap"}}},customBodyRender:function(a){return isNaN(Number(new Date(a)))?a:new Date(a).toLocaleString()},customFilterListOptions:J.customFilterListOptions,filterOptions:J.filterOptions}},{label:"N\xedvel",name:"level",filterList:["SUCCESS","ERROR","DEBUG","INFO","WARNING"],options:{setCellProps:function(){return{style:{whiteSpace:"nowrap"}}},customBodyRender:function(a){return void 0===a?(0,b.jsx)(b.Fragment,{}):(0,b.jsx)(K,{level:a,children:a})}}},{label:"T\xedtulo",name:"title",options:{setCellProps:function(){return{style:{whiteSpace:"nowrap"}}},customHeadLabelRender:function(a){return(0,b.jsx)("div",{style:{whiteSpace:"nowrap"},children:a.label})}}},{label:"C\xf3digo",name:"code"},{label:"Info",name:"info",options:{filter:!1,display:!1,setCellProps:function(){return{style:{whiteSpace:"nowrap"}}},customBodyRenderLite:function(a,g){if(m.isValidElement(null===(h=z[a])|| void 0===h?void 0:h.info))return z[a].info;var h,c,d,e=null===(c=z[a])|| void 0===c?void 0:c.hideProduction,f=null===(d=z[a])|| void 0===d?void 0:d.hideConsole;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{title:"Mostrado no modo de produ\xe7\xe3o",hidden:e,children:(0,b.jsx)(D.Z,{})}),(0,b.jsx)("span",{title:"Oculto do console",hidden:!f,children:(0,b.jsx)(C.Z,{style:{marginLeft:"4px"}})})]})}}},{label:"Cor",name:"color",options:{setCellProps:function(){return{style:{padding:"0"}}},customBodyRenderLite:function(a,e){if(m.isValidElement(null===(f=z[a])|| void 0===f?void 0:f.info))return z[a].info;var f,c,d=null===(c=z[a])|| void 0===c?void 0:c.color;return(0,b.jsx)(L,{color:d})}}},{label:"Conte\xfado",name:"contents",options:{filterType:"textField",customBodyRender:function(a){return void 0===a?(0,b.jsx)(b.Fragment,{}):Array.isArray(a)?a.map(function(a,c){return"object"==typeof a?(0,b.jsx)("span",{className:"content-cell-object",children:(0,b.jsx)(B.vu,{data:a,theme:N(N({},B.i6),{BASE_BACKGROUND_COLOR:"transparent"})},c)}):(0,b.jsx)("span",{className:"content-cell-text",title:a,children:a},c)}):a}}},{label:"Detalhes",name:"details",sort:!1,options:{setCellProps:function(){return{className:"details-cell"}},filterType:"textField",filterOptions:{names:[],logic:function(a,c,d){var b;try{a=JSON.stringify(a)}catch(e){}return!(null!==(b=a)&& void 0!==b?b:"").toString().includes(c[0])}},customBodyRenderLite:function(d,e){var c,a=null===(c=z[d])|| void 0===c?void 0:c.details;return void 0===a?(0,b.jsx)(b.Fragment,{}):m.isValidElement(a)?a:(0,b.jsx)(B.vu,{data:a,theme:N(N({},B.i6),{BASE_BACKGROUND_COLOR:"transparent"})})}}}]),options:{confirmFilters:!0,customFilterDialogFooter:function(c,a){return(0,b.jsx)("div",{style:{marginTop:"40px"},children:(0,b.jsx)(O.Z,{variant:"contained",onClick:a,children:r.filter.apply})})},customToolbar:A,download:!1,filterType:"multiselect",fixedHeader:!0,print:!1,resizableColumns:f,onChangeRowsPerPage:function(a){return E(a)},rowsPerPage:x,rowsPerPageOptions:[10,50,100,200,500,1e3],selectableRows:"none",sortOrder:{name:"date",direction:"desc"},tableBodyHeight:"calc(100vh - 64px - 53px)",textLabels:r}})})]})}},45728:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(67788)}])}},function(a){a.O(0,[910,774,888,179],function(){var b;return a(a.s=45728)}),_N_E=a.O()}])